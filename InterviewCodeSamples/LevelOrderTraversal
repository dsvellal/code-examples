import java.util.LinkedList;
import java.util.List;
import java.util.StringJoiner;

public class LevelOrderTraversal {
	private List<Node> currentLevel;
	private List<Node> nextLevel;

	public LevelOrderTraversal() {
		currentLevel = new LinkedList<Node>();
		nextLevel = new LinkedList<Node>();
	}

	public String zigZagTraversal(Node root) {
		StringJoiner output = new StringJoiner(" ");
		if (root == null || (root.left == null && root.right == null)) {
			return "Root is " + root.content + ". Can't traverse further";
		}

		currentLevel.add(root);
		boolean leftToRight = true;
		while (true) {
			if (currentLevel.isEmpty() && nextLevel.isEmpty()) {
				break;
			}

			if (leftToRight) {
				for (Node node : currentLevel) {
					output.add(node.content);
				}
			} else {
				for (int i = currentLevel.size() - 1; i >= 0; i--) {
					output.add(currentLevel.get(i).content);
				}
			}

			for (Node node : currentLevel) {
				if (node.left != null) {
					nextLevel.add(node.left);
				}

				if (node.right != null) {
					nextLevel.add(node.right);
				}
			}

			currentLevel.clear();
			currentLevel = deepCopy(nextLevel);
			nextLevel.clear();
			leftToRight = !leftToRight;
		}

		return output.toString();
	}
	
	private List<Node> deepCopy(List<Node> level) {
		List<Node> copyLevel = new LinkedList<Node>();
		for (Node node : level) {
			Node copyNode = new Node();
			copyNode.content = node.content;
			copyNode.left = node.left;
			copyNode.right = node.right;
			copyNode.parent = node.parent;
			copyLevel.add(copyNode);
		}
		return copyLevel;
	}

	public static void main(String[] args) {
		Node root = new Node();
		Node l1RL = new Node();
		setNode(l1RL, "2", null, null, root);
		setNode(root, "1", l1RL, null, null);

		LevelOrderTraversal traversal = new LevelOrderTraversal();
		System.out.println(traversal.zigZagTraversal(root));
	}

	private static void setNode(Node node, String content, Node left, Node right, Node parent) {
		node.content = content;
		node.left = left;
		node.right = right;
		node.parent = parent;
	}
	
	private class Node {
		public String content;
		public Node left;
		public Node right;
		public Node parent;
	}
}

